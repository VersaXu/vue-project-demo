<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/Turtle-Soup/favicon.ico">
    <meta name="viewport" content="width=device-width initial-scale=1.0">
    <title>海龟汤问答游戏</title>
    <script type="module" crossorigin src="/Turtle-Soup/assets/index-DFyfGeut.js"></script>
    <link rel="stylesheet" crossorigin href="/Turtle-Soup/assets/index-C1wLpbzg.css">
    <script>
      // 在加载应用前注入API地址
      window.TURTLE_SOUP_API_URL = "https://turtle-soup-backend-hsry.vercel.app/api";
      
      // 修复API地址
      document.addEventListener('DOMContentLoaded', function() {
        // 创建一个全局变量供应用使用
        window.__TURTLE_SOUP_CONFIG__ = {
          apiBaseUrl: window.TURTLE_SOUP_API_URL
        };
        
        // 尝试替换已加载脚本中的API地址
        try {
          // 监听网络请求，拦截并修改API地址
          const originalFetch = window.fetch;
          window.fetch = function(url, options) {
            if (typeof url === 'string' && url.includes('turtle-soup-backend.vercel.app')) {
              url = url.replace('turtle-soup-backend.vercel.app', 'turtle-soup-backend-hsry.vercel.app');
            }
            return originalFetch.call(this, url, options);
          };
          
          // 同样拦截XMLHttpRequest
          const originalOpen = XMLHttpRequest.prototype.open;
          XMLHttpRequest.prototype.open = function(method, url, ...rest) {
            if (typeof url === 'string' && url.includes('turtle-soup-backend.vercel.app')) {
              url = url.replace('turtle-soup-backend.vercel.app', 'turtle-soup-backend-hsry.vercel.app');
            }
            return originalOpen.call(this, method, url, ...rest);
          };
          
          console.log('API地址已更新为:', window.TURTLE_SOUP_API_URL);
        } catch (e) {
          console.error('修复API地址时出错:', e);
        }
      });
    </script>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
